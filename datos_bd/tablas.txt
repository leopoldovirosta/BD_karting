CREATE TABLE federaciones (
 id_federacion INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
 nombre_federacion ENUM('Privado','Andaluza','Aragonesa','Asturias','Canaria','Cantabra','Castilla La Mancha','Castilla y Leon','Catalana','Ceuta','Extremeña','Gallega','Islas Canarias','Islas Baleares','Las Palmas','La Rioja','Madrileña','Melilla','Murcia','Navarra','Tenerife','Valenciana') COLLATE utf8_spanish_ci NOT NULL)  ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_spanish_ci;

CREATE TABLE escuderias (
 id_escuderia INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
 nombre_escuderia VARCHAR(50) COLLATE utf8_spanish_ci NOT NULL,
 web_escuderia VARCHAR(60) COLLATE utf8_spanish_ci ) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_spanish_ci;

CREATE TABLE sponsors (
id_sponsor INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
nombre_sponsor VARCHAR(50) COLLATE utf8_spanish_ci NOT NULL,
web_sponsor VARCHAR(60) COLLATE utf8_spanish_ci)  ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_spanish_ci;

CREATE TABLE chasis (
id_chasis INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
modelo_chasis VARCHAR(30) COLLATE utf8_spanish_ci NOT NULL,
marca_chasis VARCHAR(30) COLLATE utf8_spanish_ci NOT NULL,
web_marca_chasis VARCHAR(100) COLLATE utf8_spanish_ci,
foto_chasis VARCHAR(70) COLLATE utf8_spanish_ci,
homologacion_chasis VARCHAR(70) COLLATE utf8_spanish_ci)  ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_spanish_ci;

CREATE TABLE motores (
id_motor INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
modelo_motor VARCHAR(30) COLLATE utf8_spanish_ci NOT NULL,
marca_motores VARCHAR(30) COLLATE utf8_spanish_ci NOT NULL,
web_marca_motores VARCHAR(100) COLLATE utf8_spanish_ci,
foto_motor VARCHAR(70) COLLATE utf8_spanish_ci,
homologacion_motor VARCHAR(70) COLLATE utf8_spanish_ci) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_spanish_ci;

CREATE TABLE pilotos (
id_piloto INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
nombre_piloto VARCHAR(30) COLLATE utf8_spanish_ci NOT NULL,
apellido_piloto VARCHAR(50) COLLATE utf8_spanish_ci,
fecha_nacimiento DATE,
web_piloto VARCHAR(100) COLLATE utf8_spanish_ci,
email_piloto VARCHAR(60) COLLATE utf8_spanish_ci,
foto_piloto VARCHAR(70) COLLATE utf8_spanish_ci,
pais ENUM('Alemania','Bélgica','Croacia','Dinamarca','España','Francia','Irlanda','Letonia','Luxemburgo','Países Bajos','Suecia','Bulgaria','Eslovaquia','Estonia','Grecia','Malta','Polonia', 'República Checa','Austria','Chipre','Eslovenia','Finlandia','Hungría','Italia','Lituania','Portugal','Rumanía') COLLATE utf8_spanish_ci,
federacion_id INT UNSIGNED NOT NULL,
escuderia_id INT UNSIGNED NOT NULL,
sponsor_id INT UNSIGNED NOT NULL,
FOREIGN KEY (federacion_id) REFERENCES federaciones(id_federacion),
FOREIGN KEY (escuderia_id) REFERENCES escuderias(id_escuderia),
FOREIGN KEY (sponsor_id) REFERENCES sponsors(id_sponsor)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_spanish_ci;

CREATE TABLE campeonatos (
id_cto INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
nombre_cto VARCHAR(50) COLLATE utf8_spanish_ci NOT NULL) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_spanish_ci;

CREATE TABLE circuitos (
id_circuito INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
nombre_circuito VARCHAR(50) COLLATE utf8_spanish_ci NOT NULL,
provincia_circuito ENUM(
'Alava','Albacete','Alicante','Almeria','Asturias','Avila','Badajoz','Barcelona','Burgos','Caceres','Cadiz','Cantabria','Castellon','Comunidad Valenciana','Ciudad Real','Cordoba',
'Cuenca','Girona','Granada','Guadalajara','Gipuzkoa','Huelva','Huesca','Islas Baleares','Jaen','A Coruña','La Rioja','Las Palmas','Leon','Lleida','Lugo','Madrid','Malaga','Murcia',
'Navarra','Orense','Palencia','Pontevedra','Salamanca','Santa Cruz de Tenerife','Segovia','Sevilla','Soria','Tarragona','Teruel','Toledo','Valencia','Valladolid','Bizkaia','Zamora','Zaragoza') COLLATE utf8_spanish_ci NOT NULL,
web_circuito VARCHAR(100) COLLATE utf8_spanish_ci,
direccion_circuito VARCHAR(60) COLLATE utf8_spanish_ci,
telefono_circuito VARCHAR(15) COLLATE utf8_spanish_ci,
localidad VARCHAR(30) COLLATE utf8_spanish_ci NOT NULL) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_spanish_ci;

CREATE TABLE carreras (
id_carrera INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
fecha_carrera DATE NOT NULL,
dia ENUM('Despejado','Ligeramente nublado','Muy nublado','Nublado') COLLATE utf8_spanish_ci,
temperatura TINYINT,
humedad TINYINT,
presion SMALLINT,
viento TINYINT,
pista ENUM('Seco','Mojado') COLLATE utf8_spanish_ci,
tipo_carrera ENUM('Clasificacion','Carrera 1','Carrera 2','Warm Up','Test') COLLATE utf8_spanish_ci NOT NULL,
circuito_id INT UNSIGNED NOT NULL,
FOREIGN KEY (circuito_id) REFERENCES circuitos(id_circuito)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_spanish_ci;

CREATE TABLE carreras_pilotos (
carrera_id INT UNSIGNED NOT NULL,
piloto_id INT UNSIGNED NOT NULL,
cto_id INT UNSIGNED NOT NULL,
chasis_id INT UNSIGNED,
motor_id INT UNSIGNED,
categoria ENUM('Senior','Pre-Mini 64 Aire','Pre-Mini 60 Agua','Mini 85 Aire','Mini 60 Agua','Mini Rotax','Junior','Rotax DD2','KZ','KZ2','Tillotson T4') COLLATE utf8_spanish_ci NOT NULL,
dorsal SMALLINT,
tiempo_total TIME(3),
mejor_vuelta TIME(3),
num_vueltas TINYINT,
posicion TINYINT,
puntos TINYINT,
FOREIGN KEY (carrera_id) REFERENCES carreras(id_carrera),
FOREIGN KEY (piloto_id) REFERENCES pilotos(id_piloto),
FOREIGN KEY (cto_id) REFERENCES campeonatos(id_cto),
FOREIGN KEY (chasis_id) REFERENCES chasis(id_chasis),
FOREIGN KEY (motor_id) REFERENCES motores(id_motor),
PRIMARY KEY (carrera_id, piloto_id,cto_id,categoria)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_spanish_ci;
