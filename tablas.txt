CREATE TABLE federaciones (
                id_federacion TINYINT NOT NULL AUTO_INCREMENT PRIMARY KEY,
                nombre_federacion ENUM('No federado','Andaluza','Aragonesa','Asturias','Canaria','Cantabra','Castilla La Mancha','Castilla y Leon','Catalana','Ceuta','Extremeña','Gallega','Islas Canarias','Islas Baleares','Las Palmas','La Rioja','Madrileña','Melilla','Murcia','Navarra','Tenerife','Valenciana') NOT NULL);

CREATE TABLE escuderias (
                id_escuderia INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
                nombre_escuderia VARCHAR(50) NOT NULL,
                web_escuderia VARCHAR(60));

CREATE TABLE sponsors (
                id_sponsor INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
                nombre_sponsor VARCHAR(50) NOT NULL,
                web_sponsor VARCHAR(60));

CREATE TABLE marcas (
                id_marca INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
                nombre_marca VARCHAR(50) NOT NULL,
                web_marca VARCHAR(60));

CREATE TABLE chasis (
                id_chasis INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
                marca_id INT NOT NULL,
                modelo_chasis VARCHAR(30) NOT NULL,
                foto_chasis VARCHAR(50),
                homologacion_chasis VARCHAR(50),
                FOREIGN KEY (marca_id) REFERENCES marcas(id_marca)
);

CREATE TABLE motores (
                id_motor INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
                marca_id INT NOT NULL,
                modelo_motor VARCHAR(30) NOT NULL,
                foto_motor VARCHAR(50),
                homologacion_motor VARCHAR(50),
                FOREIGN KEY (marca_id) REFERENCES marcas(id_marca)
);

CREATE TABLE pilotos (
                id_piloto INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
                nombre_piloto VARCHAR(30) NOT NULL,
                apellido_piloto VARCHAR(50),
                dorsal SMALLINT,
                fecha_nacimiento DATE,
                web_piloto VARCHAR(60),
                email_piloto VARCHAR(30),
                foto_piloto VARCHAR(50),
                federacion_id TINYINT NOT NULL,
                escuderia_id INT NOT NULL,
                sponsor_id INT NOT NULL,
                chasis_id INT NOT NULL,
                motor_id INT NOT NULL,
                FOREIGN KEY (federacion_id) REFERENCES federaciones(id_federacion),
                FOREIGN KEY (escuderia_id) REFERENCES escuderias(id_escuderia),
                FOREIGN KEY (sponsor_id) REFERENCES sponsors(id_sponsor),
                FOREIGN KEY (chasis_id) REFERENCES chasis(id_chasis),
                FOREIGN KEY (motor_id) REFERENCES motores(id_motor)
);

CREATE TABLE historico_pilotos (
                id_historico INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
                fecha_inicio DATE,
                fecha_final DATE,
                piloto_id INT NOT NULL,
                chasis_id INT NOT NULL,
                motor_id INT NOT NULL,
                foto_historico VARCHAR(50),
                FOREIGN KEY (piloto_id) REFERENCES pilotos(id_piloto),
                FOREIGN KEY (chasis_id) REFERENCES chasis(id_chasis),
                FOREIGN KEY (motor_id) REFERENCES motores(id_motor)
);

CREATE TABLE categorias (
                id_categoria TINYINT NOT NULL AUTO_INCREMENT PRIMARY KEY,
                nombre_cat ENUM('Senior','Mini','Junior','Rotax DD2','KZ')  NOT NULL
 );

CREATE TABLE campeonatos (
                id_cto INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
                nombre_cto VARCHAR(50) NOT NULL);

CREATE TABLE carrera_tipo (
                id_carrera_tipo TINYINT NOT NULL AUTO_INCREMENT PRIMARY KEY,
                tipo_carrera ENUM('Clasificacion','Carrera 1','Carrera 2','Test') NOT NULL
);

CREATE TABLE circuitos (
                id_circuito INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
                nombre_circuito VARCHAR(50) NOT NULL,
                provincia_circuito ENUM(
'Alava','Albacete','Alicante','Almeria','Asturias','Avila','Badajoz','Barcelona','Burgos','Caceres','Cadiz','Cantabria','Castellon','Comunidad Valenciana','Ciudad Real','Cordoba',
'Cuenca','Girona','Granada','Guadalajara','Gipuzkoa','Huelva','Huesca','Islas Baleares','Jaen','A Coruña','La Rioja','Las Palmas','Leon','Lleida','Lugo','Madrid','Malaga','Murcia',
'Navarra','Orense','Palencia','Pontevedra','Salamanca','Santa Cruz de Tenerife','Segovia','Sevilla','Soria','Tarragona','Teruel','Toledo','Valencia','Valladolid','Bizkaia','Zamora','Zaragoza') NOT NULL,
                web_circuito VARCHAR(100),
                direccion_circuito VARCHAR(60),
                telefono_circuito VARCHAR(15),
                localidad VARCHAR(30) NOT NULL
 );

CREATE TABLE carreras (
                id_carrera INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
                fecha_carrera DATE NOT NULL,
                dia ENUM('Despejado','Ligeramente nublado','Muy nublado','Nublado'),
                temperatura TINYINT,
                humedad TINYINT,
                presion SMALLINT,
                viento TINYINT,
                pista ENUM('Seco','Mojado'),
                tipo_carrera_id TINYINT NOT NULL,
                circuito_id INT,
                cto_id INT,
                FOREIGN KEY (tipo_carrera_id) REFERENCES carrera_tipo(id_carrera_tipo),
                FOREIGN KEY (circuito_id) REFERENCES circuitos(id_circuito),
                FOREIGN KEY (cto_id) REFERENCES campeonatos(id_cto)
);

CREATE TABLE carreras_piloto (
                id_carrera_piloto INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
                piloto_id INT NOT NULL,
                categoria_id TINYINT NOT NULL,
                carrera_id INT NOT NULL,
                tiempo_total TIME,
                mejor_vuelta TIME,
                num_vueltas TINYINT,
                posicion TINYINT,
                puntos TINYINT,
                FOREIGN KEY (piloto_id) REFERENCES pilotos(id_piloto),
                FOREIGN KEY (categoria_id) REFERENCES categorias(id_categoria),
                FOREIGN KEY (carrera_id) REFERENCES carreras(id_carrera)
);
